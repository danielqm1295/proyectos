<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <title>Body</title>
    <script src="body.js"></script>
</head>

<body onload="cargarDatos()">
    <h1 id="titulo"></h1>
    <table id="tablaAsignaturas" border="2px">
    </table>
</body>

<script type="text/javascript">
    /*Funcion invocada al cargar la pagina*/
    function cargarDatos() {
        construirTitulo();
        generarTabla();
    }

    /* Funcion que rellena el html de la tabla con los datos de las asignaturas
     */
    function generarTabla() {

        var htmlTabla = "<tr><th>Asignatura</th><th>Recursos</th><th>Tecnologias</th></tr>";
        for (var i = 0; i < asignaturas.length; i++) {

            var asig = asignaturas[i];

            // Generamos el html para la celda que va a contener el nombre de la asignatura //
            var celdaNombre = "<td>" + asig.codigo + " - " + asig.nombre + "</td>";

            // Generamos el html para la celda que va a contener los recursos de la asignatura //
            var celdaRecursos = "<td><ul>";
            for (var j = 0; j < asig.recursos.length; j++) {

                celdaRecursos += "<li><a  target='_blank' href=" + asig.recursos[j] + ">" + asig.recursos[j] + "</a></li>";
            }
            celdaRecursos += "</ul></td>";

            // Generamos el html para la celda que va a contener las tecnologias

            if (asig.tecnologias != undefined) {

                var celdaTecnologias = "<td><ul>";
                for (var j = 0; j < asig.tecnologias.length; j++) {

                    celdaTecnologias += "<li>" + asig.tecnologias[j] + "</li>";
                }
                celdaTecnologias += "</ul></td>";
            }

            htmlTabla += "<tr>" + celdaNombre + celdaRecursos + celdaTecnologias + "</tr>";
        }
        console.log(htmlTabla);
        document.getElementById('tablaAsignaturas').innerHTML = htmlTabla;
    }


    /* Modifica el titulo con la suma de las horas de las asignaturas */
    function construirTitulo() {
        var sumaHoras = 0;
        for (var i = 0; i < asignaturas.length; i++) {
            var asignatura = asignaturas[i];
            sumaHoras += asignatura.horas;
        }
        document.getElementById('titulo').innerHTML = "Recursos DAW (" + sumaHoras + "h)";
    }
</script>

</html>